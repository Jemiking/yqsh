# å­•æœŸå®ˆæŠ¤APP - å¤´è„‘é£æš´è®°å½•

> **æ—¥æœŸ**: 2024-12-19
> **å‚ä¸æ¨¡å‹**: Claude (ä¸»æ§) + Codex + Gemini
> **ä¼šè¯çŠ¶æ€**: è¿›è¡Œä¸­

---

## ä¼šè¯ä¿¡æ¯

| æ¨¡å‹ | SESSION_ID | çŠ¶æ€ |
|------|------------|------|
| **Codex** | `019b3528-c2e9-7e41-817b-7032ef6687cf` | ğŸŸ¢ æ´»è·ƒ |
| **Gemini** | `bdf80ee4-6d8c-42f8-bf3e-16e8be7b92e8` | ğŸŸ¢ æ´»è·ƒ |

---

## ç¬¬ä¸€è½®ï¼šåˆå§‹æ–¹æ¡ˆï¼ˆè¢«å¦å†³ï¼‰

### é—®é¢˜

åˆå§‹æ–¹æ¡ˆè¿‡äº"åŠŸèƒ½å †ç Œ"ï¼Œå’Œå¸‚é¢ä¸Šæ‰€æœ‰å­•æœŸAPPæ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼š
- ä¿¡æ¯å±•ç¤ºå‹ï¼ˆç¬¬Xå‘¨å®å®åƒæ°´æœ...ï¼‰
- è¢«åŠ¨å·¥å…·å‹ï¼ˆç”¨æˆ·è‡ªå·±æ¥è®°å½•ã€æŸ¥è¯¢ï¼‰
- é¢å‘å¦ˆå¦ˆè®¾è®¡ï¼ˆçˆ¸çˆ¸åªæ˜¯æ—è§‚è€…ï¼‰

### Codex åˆå§‹è¾“å‡º

```
Core MVP (Local first, father lens)
- Week timeline: static 40-week dataset (JSON seeded locally)
- Tracking: symptom log, weight log + chart, kick counter, contraction timer
- Appointments with reminders
- Emergency contacts quick-dial
- Hospital bag and baby prep checklists
```

### Gemini åˆå§‹è¾“å‡º

```
Visual Design Language: "Grounded Warmth"
- Primary: Slate Blue (#475569)
- Secondary: Sage Green (#84A98C)
- Accent: Terracotta (#E07A5F)

Navigation: Bottom Tab Bar
- Home, Timeline, Tools, Assistant, Profile
```

### ç”¨æˆ·åé¦ˆ

> "ä½ ä»¬å¤´è„‘é£æš´å‡ºæ¥çš„å°±è¿™æ ·ï¼Ÿè¿™äº›æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ"

---

## ç¬¬äºŒè½®ï¼šæ·±å…¥é‡æ„

### æ ¸å¿ƒæ´å¯Ÿ

**å¸‚é¢ä¸Šæ‰€æœ‰å­•æœŸAPPçš„é—®é¢˜ï¼š**
- ä¿¡æ¯å †ç Œï¼ˆç¬¬Xå‘¨å®å®åƒé¦™è•‰å¤§å°...ç„¶åå‘¢ï¼Ÿï¼‰
- è¢«åŠ¨å·¥å…·ï¼ˆä½ æ¥è®°å½•ï¼Œä½ æ¥æŸ¥ï¼‰
- é¢å‘å¦ˆå¦ˆè®¾è®¡ï¼ˆçˆ¸çˆ¸åªæ˜¯æ—è§‚è€…ï¼‰

**å‡†çˆ¸çˆ¸çœŸæ­£éœ€è¦çš„æ˜¯ï¼š**
> "å‘Šè¯‰æˆ‘**ç°åœ¨**è¯¥åšä»€ä¹ˆï¼Œ**æ€ä¹ˆ**åšï¼Œ**è¯´ä»€ä¹ˆ**è¯"

### Codex ç¬¬äºŒè½®è¾“å‡º

```
Killer Angle: Dad's AI Copilot

æ ¸å¿ƒåŠŸèƒ½é‡æ„ï¼š
1. Morning Briefing + Tonight Plan
   - "Week 24, likely back pain. Do: prep heat pack, light dinner, set 9pm walk."
   - æ¨é€è¡ŒåŠ¨ï¼Œä¸æ˜¯äº‹å®

2. Situation Cards
   - Dad types "she's upset about weight"
   - AI gives 3 do's, 3 don'ts, exact sentences, escalation rules

3. Task Engine
   - Time-locked, week-aware missions with deadlines
   - Earns Dad XP + skills

4. Emergency Flow
   - One-tap urgency assessment
   - "Go-bag now" tasks
   - Quick-call 120/OB contact, GPS share

5. Symptom Analyzer
   - Input symptom + trimester/week + vitals
   - Output: normal vs red flags, home care steps, when to call ER

6. Food Safety Lookup
   - Free text food â†’ allow/avoid, portion, prep notes
   - Cultural taboo vs evidence (CN context)

7. Emotional Coaching
   - "What to say / not to say" with short scripts
   - MIL diplomacy tips (CN)
```

### Gemini ç¬¬äºŒè½®è¾“å‡º

```
Core Philosophy: "The Invisible Interface"

The app shouldn't look like a spreadsheet.
It should feel like a text thread with a very smart, empathetic friend.

Emotional Journey & Touchpoints:

1. Morning State (Confidence & Purpose)
   - "Good morning, Captain. It's Week 24..."
   - "Your Mission: Don't ask 'how can I help.' Just heat up the heating pad..."
   - Swipe: "Mission Accepted"

2. Panic State (Clarity & Calm)
   - The "Red Button" (SOS Mode)
   - < 3 seconds response
   - High-contrast UI for emergencies

3. Curiosity State (Intelligence & Nuance)
   - Voice-first: "Is Brie cheese okay?"
   - Nuanced answer, not just yes/no

4. Guilt/Reflection State (Validation)
   - "The Dad Log" - shows what he DID, not what he didn't
   - "Dad Level" / Experience Bar

5. Milestone State (Connection)
   - "Time Capsule" for memories
   - Letters to baby
```

### ç”¨æˆ·åé¦ˆ

> "æœ‰ç‚¹å‘³é“äº†ï¼Œä½†æ˜¯è¿˜ä¸å¤Ÿï¼Œè¿œè¿œä¸å¤Ÿã€‚ä½ ä»¬çš„å¤´è„‘é£æš´èƒ½ä¸èƒ½æ‹¿å‡ºç‚¹å¹²è´§"

---

## ç¬¬ä¸‰è½®ï¼šæ ¸å¿ƒå¹²è´§

### æ ¸å¿ƒçœŸç›¸

> **"AIæ²¡æœ‰çŸ¥è¯†åº“å°±æ˜¯åºŸç‰©ã€‚"**
>
> æˆ‘ä»¬ä¸æ˜¯åœ¨åš"AIèŠå¤©APP"ï¼Œæˆ‘ä»¬æ˜¯åœ¨åšä¸€ä¸ª**ç»“æ„åŒ–çš„å­•æœŸçŸ¥è¯†ç³»ç»Ÿ**ï¼ŒAIåªæ˜¯è¿™ä¸ªç³»ç»Ÿçš„"å˜´"ã€‚

### Codex ç¬¬ä¸‰è½®è¾“å‡ºï¼ˆçŸ¥è¯†æ¶æ„ï¼‰

```
Core Claim: AI is only as good as its structured knowledge

Knowledge Sourcing & Governance:
- Sources: ACOG, WHO guidelines + Localized CN guidance
- OB/GYN-reviewed playbooks
- Curated dad scripts reviewed by psych/counselor

Knowledge Representation (offline-first, updatable):
- Canonical format: typed YAML/JSON files
- Directories:
  - kb/weeks/week_24.yaml
  - kb/foods/*.yaml
  - kb/symptoms/*.yaml
  - kb/scenarios/*.yaml
  - kb/emergency/*.yaml

Data Architecture (SQLite):
- knowledge.db (read-only, updatable)
  - weeks, foods, symptoms, scenarios, emergencies, tasks, manifest
- user.db (local)
  - profile, symptom_logs, tasks_status, journal, letters, milestones, ai_config, chat_history

AI Utilization Layer:
- Retrieval-first, generation-second
- Components: ContextBuilder, Retriever, PolicyPrompt, Generator
- Deterministic Mode: For critical flows, render directly from structured data WITHOUT LLM

Minimum Viable Knowledge:
- Weeks: 40 entries
- Foods: 150-200 high-frequency items
- Symptoms: 20 core with triage/red flags/home care
- Scenarios: 30 emotional scripts
- Emergency: 5-7 flows
```

### Gemini ç¬¬ä¸‰è½®è¾“å‡ºï¼ˆäº¤äº’åˆ›æ–°ï¼‰

```
The Core Concept: "The 40-Week Conversation"

The app isn't a collection of static screens.
It is a single, continuous timeline of interaction.

Entry Point: "The Daily Intel"
- Top 1/3: Dynamic "Intel Card" with baby size/week
- Middle: "Daily Mission" (dismissible)
- Bottom 2/3: Live Chat Stream

Rich Chat Experience:
- AI brings tools TO the chat (not separate screens)
- Scenario A: User types "back pain" â†’ AI logs it AND provides relief tactics
- Scenario B: Voice "Can she eat sushi?" â†’ Instant nuanced answer
- Scenario C: "When is the next scan?" â†’ Timeline fragment appears in chat

Panic Mode:
- Keywords detected: bleeding, water broke, severe pain
- UI transforms: high-contrast, zero fluff
- One-tap call button

AI Persona: "Chief"
- Competent, Calm, Brief
- Not robotic, not bro-ish
- Perfect: "Hydration is key today. Get a glass of water in her hand, even if she doesn't ask for it."
```

---

## ç¬¬å››è½®ï¼š40å‘¨æ•°æ®ç¤ºä¾‹

### å·²å®Œæˆç¤ºä¾‹

| å‘¨æ•° | å­•æœŸ | å…³é”®ä¸»é¢˜ | è´¡çŒ®è€… |
|------|------|----------|--------|
| ç¬¬6å‘¨ | å­•æ—©æœŸ | æœ€æ•æ„Ÿæ—¶æœŸï¼Œæµäº§é£é™©é«˜ | Codex |
| ç¬¬12å‘¨ | å­•æ—©æœŸâ†’ä¸­æœŸ | æµäº§é£é™©å¤§é™ï¼Œå¯ä»¥å®˜å®£ | Gemini |
| ç¬¬24å‘¨ | å­•ä¸­æœŸ | é»„é‡‘æœŸï¼Œå®å®èƒ½å¬åˆ°å£°éŸ³ | Codex |
| ç¬¬32å‘¨ | å­•æ™šæœŸ | å†²åˆºå‡†å¤‡ï¼Œå‡å®«ç¼©å¼€å§‹ | Gemini |
| ç¬¬38å‘¨ | è¶³æœˆ | éšæ—¶å¾…å‘½ï¼Œä¸´äº§ä¿¡å· | Codex |

### æ•°æ®ç»“æ„å®šä¹‰

```yaml
week: X
trimester: 1/2/3
gestational_days: X-X

baby:
  size:
    length_cm: X
    weight_g: X
    comparison: "åƒXXä¸€æ ·å¤§"
  developments: []
  what_dad_can_do: []

mother:
  physical_symptoms:
    - symptom: åç§°
      probability: 0.X
      cause: åŸå› 
      when: é«˜å‘æ—¶é—´
      dad_action: å…·ä½“è¡ŒåŠ¨
  emotional_state:
    - state: æƒ…ç»ª
      cause: åŸå› 
      dad_should: åº”è¯¥åš
      dad_should_not: ä¸è¯¥åš
  warning_signs:
    - symptom: æè¿°
      possible_condition: å¯èƒ½æƒ…å†µ
      urgency: EMERGENCY/HIGH/MEDIUM
      action: è¡ŒåŠ¨

dad_actions:
  daily_morning: []
  daily_evening: []
  this_week_tasks: []
  what_to_prepare: []

nutrition:
  focus_nutrients: []
  recommended_foods: []
  avoid_foods: []
  meal_suggestion:
    breakfast: å»ºè®®
    lunch: å»ºè®®
    dinner: å»ºè®®

medical:
  scheduled_checkups:
    - name: åç§°
      purpose: ç›®çš„
      what_to_expect: é¢„æœŸ
      dad_role: çˆ¸çˆ¸è§’è‰²

dad_tip_of_week: "æœ¬å‘¨æœ€é‡è¦çš„ä¸€å¥è¯"
```

### é™„åŠ çŸ¥è¯†åº“ç»“æ„

#### å‡å®«ç¼© vs çœŸå®«ç¼©ï¼ˆGeminiè´¡çŒ®ï¼‰

```yaml
braxton_hicks_vs_labor:
  å‡å®«ç¼©:
    æ„Ÿè§‰: è‚šå­å‘ç´§ã€å˜ç¡¬ï¼Œä¸ç—›æˆ–è½»å¾®ä¸é€‚
    è§„å¾‹: æ— è§„å¾‹ï¼Œæ—¶æœ‰æ—¶æ— 
    è§¦å‘: å¤ªç´¯ã€ç¼ºæ°´ã€å§¿åŠ¿å˜åŒ–
    ç¼“è§£: å–æ°´ã€æ•£æ­¥ã€æ¢å§¿åŠ¿æˆ–ä¼‘æ¯å°±ä¼šç¼“è§£

  çœŸå®«ç¼©:
    æ„Ÿè§‰: æœ‰ç—›æ„Ÿï¼Œåƒç—›ç»ä½†æ›´å¼ºï¼Œå¯èƒ½æ”¾å°„åˆ°åèƒŒ
    è§„å¾‹: æœ‰è§„å¾‹ï¼Œè¶Šæ¥è¶Šé¢‘ç¹
    è§¦å‘: è‡ªç„¶å‘ç”Ÿï¼Œä¸å› ä¼‘æ¯è€Œåœæ­¢
    ç¼“è§£: æ— è®ºæ€ä¹ˆæ¢å§¿åŠ¿ï¼Œç–¼ç—›éƒ½ä¸ä¼šåœæ­¢
```

#### å¾…äº§åŒ…æ¸…å•ï¼ˆGeminiè´¡çŒ®ï¼‰

```yaml
hospital_bag_checklist:
  è¯ä»¶ç±»:
    - èº«ä»½è¯ï¼ˆåŒæ–¹ï¼‰
    - åŒ»ä¿å¡
    - å›´äº§æ‰‹å†Œ
    - é“¶è¡Œå¡/ç°é‡‘

  å¦ˆå¦ˆç”¨å“:
    - ä¸€æ¬¡æ€§å†…è£¤
    - å‰å¼€æ‰£ç¡è¡£
    - äº§è¤¥å«
    - å¸ç®¡æ¯
    - é˜²æ»‘æ‹–é‹

  å®å®ç”¨å“:
    - NBå·çº¸å°¿è£¤
    - å’Œå°šæœ/è¿ä½“è¡£
    - åŒ…è¢«
    - æ¹¿å·¾/æ£‰æŸ”å·¾

  çˆ¸çˆ¸ç”Ÿå­˜åŒ…:
    - æ‰‹æœºå……ç”µå™¨ï¼ˆä¸¤ä¸ªï¼‰
    - å……ç”µå®
    - é›¶é£Ÿå’Œæ°´
    - ç°é‡‘
```

---

## å…³é”®å†³ç­–è®°å½•

### å·²ç¡®è®¤å†³ç­–

| å†³ç­–é¡¹ | é€‰æ‹© | ç¡®è®¤æ—¶é—´ |
|--------|------|----------|
| æŠ€æœ¯æ ˆ | React Native + TypeScript | 2024-12-19 |
| ç›®æ ‡å¹³å° | Android ä¼˜å…ˆ | 2024-12-19 |
| æ ¸å¿ƒç”¨æˆ· | å‡†çˆ¸çˆ¸è§†è§’ | 2024-12-19 |
| AIæ¥å…¥ | ç”¨æˆ·è‡ªé…ç½®API | 2024-12-19 |
| æ•°æ®åº“ | SQLiteï¼ˆåŒåº“åˆ†ç¦»ï¼‰ | 2024-12-19 |
| çŠ¶æ€ç®¡ç† | Zustand | 2024-12-19 |
| å¯¼èˆª | æ¨¡å¼åˆ‡æ¢ï¼ˆéä¼ ç»ŸTabï¼‰ | 2024-12-19 |

### å¾…ç¡®è®¤å†³ç­–

| å†³ç­–é¡¹ | å€™é€‰æ–¹æ¡ˆ | çŠ¶æ€ |
|--------|----------|------|
| APPåç§° | å¾…å¤´è„‘é£æš´ | âš ï¸ è¿›è¡Œä¸­ |
| çŸ¥è¯†åº“åŒ»å­¦å®¡æ ¸ | éœ€ç¡®å®šç­–ç•¥ | âš ï¸ å¾…è®¨è®º |
| æ˜¯å¦åŒ…å«ä¸­å›½ç‰¹è‰²åŠŸèƒ½ | å†œå†/åæœˆå­/å©†åª³ | âš ï¸ å¾…ç¡®è®¤ |

---

## æ ¸å¿ƒç†å¿µæ€»ç»“

### äº§å“å®šä½

| ç»´åº¦ | ä¼ ç»Ÿå­•æœŸAPP | æˆ‘ä»¬çš„APP |
|------|------------|-----------|
| ä¿¡æ¯ vs è¡ŒåŠ¨ | ä¿¡æ¯å±•ç¤º | **è¡ŒåŠ¨æŒ‡ä»¤** |
| è¢«åŠ¨ vs ä¸»åŠ¨ | ç”¨æˆ·æ¥æŸ¥ | **ä¸»åŠ¨æ¨é€** |
| åŠŸèƒ½ vs æƒ…å¢ƒ | åŠŸèƒ½å †ç Œ | **æƒ…å¢ƒæ„ŸçŸ¥** |
| é€šç”¨ vs ä¸“å± | é¢å‘å¦ˆå¦ˆ | **çˆ¸çˆ¸ä¸“å±** |
| AIå®šä½ | èŠå¤©æœºå™¨äºº | **çŸ¥è¯†ç³»ç»Ÿçš„å˜´** |

### æŠ€æœ¯å“²å­¦

```
æ£€ç´¢ä¼˜å…ˆï¼Œç”Ÿæˆå…¶æ¬¡
AIä¸æ˜¯çŸ¥è¯†æ¥æºï¼Œåªæ˜¯è¡¨è¾¾å·¥å…·
æ‰€æœ‰å…³é”®ä¿¡æ¯å¿…é¡»æ¥è‡ªç»“æ„åŒ–çŸ¥è¯†åº“
å±é™©ä¿¡å·ä¸å…è®¸AIè‡ªç”±å‘æŒ¥
```

### äº¤äº’å“²å­¦

```
å¯¹è¯ä¼˜å…ˆï¼ŒåŠŸèƒ½å†…åµŒ
ä¸æ˜¯åŠŸèƒ½èœå•ï¼Œæ˜¯æŒç»­çš„40å‘¨å¯¹è¯
å·¥å…·æ¥åˆ°å¯¹è¯é‡Œï¼Œè€Œä¸æ˜¯ç”¨æˆ·å»æ‰¾å·¥å…·
ç´§æ€¥æ—¶åˆ»ï¼Œç•Œé¢ç¬é—´å˜åŒ–
```

---

## åç»­å¤´è„‘é£æš´è®¡åˆ’

### å¾…å®Œæˆä»»åŠ¡

1. **APPåç§°å¤´è„‘é£æš´** âš ï¸ è¿›è¡Œä¸­
   - ç”¨æˆ·å€™é€‰ï¼šä¼´ç”Ÿã€ä¸€ç”Ÿæœ‰æˆ‘
   - éœ€è¦å†ç”Ÿæˆ10+å€™é€‰åç§°

2. **è¡¥å…¨40å‘¨æ•°æ®** âš ï¸ å¾…å¼€å§‹
   - å·²å®Œæˆï¼š5å‘¨ï¼ˆ6ã€12ã€24ã€32ã€38ï¼‰
   - å¾…å®Œæˆï¼š35å‘¨

3. **é£Ÿç‰©å®‰å…¨åº“** âŒ å¾…å¼€å§‹
   - ç›®æ ‡ï¼š150-200æ¡

4. **ç—‡çŠ¶å†³ç­–æ ‘** âŒ å¾…å¼€å§‹
   - ç›®æ ‡ï¼š20æ¡æ ¸å¿ƒç—‡çŠ¶

5. **æƒ…ç»ªåœºæ™¯å‰§æœ¬** âŒ å¾…å¼€å§‹
   - ç›®æ ‡ï¼š30æ¡

---

## åŸå§‹å¯¹è¯ç²¾åæ‘˜å½•

### å…³äºäº§å“å®šä½

> Claude: "å¸‚é¢ä¸Šæ‰€æœ‰å­•æœŸAPPçš„é—®é¢˜æ˜¯ä¿¡æ¯å †ç Œã€‚å‡†çˆ¸çˆ¸çœŸæ­£éœ€è¦çš„æ˜¯ï¼šå‘Šè¯‰æˆ‘ç°åœ¨è¯¥åšä»€ä¹ˆï¼Œæ€ä¹ˆåšï¼Œè¯´ä»€ä¹ˆè¯ã€‚"

### å…³äºçŸ¥è¯†åº“

> Codex: "Core Claim: AI is only as good as its structured knowledge. We need a curated, versioned knowledge base + retrieval layer."

### å…³äºäº¤äº’

> Gemini: "The app shouldn't look like a spreadsheet. It should feel like a text thread with a very smart, empathetic friend who happens to be an expert on pregnancy."

### å…³äºAIä½¿ç”¨

> Claude: "AIæ²¡æœ‰çŸ¥è¯†åº“å°±æ˜¯åºŸç‰©ã€‚æˆ‘ä»¬ä¸æ˜¯åœ¨åš'AIèŠå¤©APP'ï¼Œæˆ‘ä»¬æ˜¯åœ¨åšä¸€ä¸ªç»“æ„åŒ–çš„å­•æœŸçŸ¥è¯†ç³»ç»Ÿï¼ŒAIåªæ˜¯è¿™ä¸ªç³»ç»Ÿçš„'å˜´'ã€‚"

### å…³äºçˆ¸çˆ¸è§†è§’

> Codex: "Father-Specific Differentiators: Daily dad tip, Emotional support reminders ('What not to say'), Partner care guides, Shopping/prep list for dad, Dad journal with sentiment tags."

---

*æ–‡æ¡£æŒç»­æ›´æ–°ä¸­...*

**æœ€åæ›´æ–°**: 2024-12-19
